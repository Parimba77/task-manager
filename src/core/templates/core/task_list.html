{% extends "core/base.html" %}
{% block title %}My Tasks{% endblock %}
{% block content %}
    <h1>My Tasks</h1>
    <a class="btn btn-primary mb-3" href="{% url 'core:task_create' %}">Create Task</a>
    <form method="get" class="row g-2 mb-3">
        <div class="col-md-3">
            <select name="status" id="form-select">
                <option value="">-- Status --</option>
                <option value="todo">To do</option>
                <option value="in-progress">In progress</option>
                <option value="done">Done</option>
            </select>
        </div>
        <div class="col-md-3">
            <select name="priority" id="form-select">
                <option value="">-- Priority --</option>
                <option value="low">Low</option>
                <option value="medium">Medium</option>
                <option value="high">High</option>
            </select>
        </div>
        <div class="col-md-2">
            <button type="submit" class="btn btn-primary">Filter</button>
        </div>
    </form>
    <table class="table table-striped">
        <thead> 
            <tr>
                <th>Title</th>
                <th>Project</th>
                <th>Status</th>
                <th>Priority</th>
                <th>Owner</th>
            </tr>
        </thead>
        <tbody>
            {% for t in tasks %}
            <tr>
                <td><a href="{% url 'core:task_detail' t.pk %}">{{ t.title }}</a></td>
                <td>{{ t.project_name }}</td>
                <td>{{ t.get_status_display }}</td>
                <td>{{ t.get_priority_display }}</td>
                <td>{{ t.assigned_to }}</td>
            </tr>
            {% empty %}
            <tr><td colspan="5">No tasks created yet.</td></tr>
            {% endfor %}
        </tbody>
    </table>
    <td>
        {% if t.status == "todo" %}
        <span class="badge bg-secondary">To do</span>
        {% elif t.status == "in_progress" %}
        <span class="badge bg-warning text-dark">In progress</span>
        {% elif t.status == "done" %}
        <span class="badge bg-sucess">Done</span>
        {% endif %}
    </td>
{% endblock %}